<?xml version="1.0" encoding="utf-8" ?>
<ContentView
    x:Class="BA_MobileGPS.Core.Views.Camera.MonitoringCamera.Template4Camera"
    xmlns="http://xamarin.com/schemas/2014/forms"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:converter="clr-namespace:BA_MobileGPS.Core"
    xmlns:d="http://xamarin.com/schemas/2014/forms/design"
    xmlns:indicator="clr-namespace:Syncfusion.SfBusyIndicator.XForms;assembly=Syncfusion.SfBusyIndicator.XForms"
    xmlns:local="clr-namespace:BA_MobileGPS.Core.Views.Camera.MonitoringCamera"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vlc="clr-namespace:LibVLCSharp.Forms.Shared;assembly=LibVLCSharp.Forms"
    mc:Ignorable="d">
    <ContentView.Resources>
        <converter:CameraTextBorderConverter x:Key="CameraTextBorderConverter" />
        <converter:ShowHideColumnConverter x:Key="ShowHideColumnConverter" />
        <Style x:Key="cameraTextFrame" TargetType="Frame">
            <Setter Property="BackgroundColor" Value="Transparent" />
            <Setter Property="CornerRadius" Value="2" />
            <Setter Property="HorizontalOptions" Value="Center" />
            <Setter Property="VerticalOptions" Value="Center" />
            <Setter Property="Padding" Value="6,2" />
            <Setter Property="Margin" Value="0,10,0,0" />
        </Style>
        <Style TargetType="indicator:SfBusyIndicator">
            <Setter Property="AnimationType" Value="Cupertino" />
            <Setter Property="BackgroundColor" Value="Transparent" />
            <Setter Property="EnableAnimation" Value="True" />
            <Setter Property="TextColor" Value="White" />
            <Setter Property="ViewBoxHeight" Value="35" />
            <Setter Property="ViewBoxWidth" Value="35" />
            <Setter Property="Duration" Value="0.8" />
        </Style>

    </ContentView.Resources>
    <Grid
        x:Name="parentPanel"
        ColumnDefinitions="*,*"
        ColumnSpacing="2"
        RowDefinitions="*,*"
        RowSpacing="2">

        <!--  Cam 1  -->
        <Grid BackgroundColor="Black" RowDefinitions="40,*">
            <Grid.GestureRecognizers>
                <TapGestureRecognizer Command="{Binding CameraFrameTappedCommand}" CommandParameter="{x:Static local:CameraEnum.FirstCamera}" />
            </Grid.GestureRecognizers>
            <Label
                Margin="0,0,10,0"
                FontSize="17"
                HorizontalOptions="End"
                StyleClass="BoldText"
                Text="{Binding Cam1ReloadCount}"
                TextColor="White"
                VerticalOptions="Center" />
            <Frame
                x:Name="frCam1"
                BackgroundColor="Transparent"
                BorderColor="{Binding SelectedCamera, Mode=OneWay, Converter={StaticResource CameraTextBorderConverter}, ConverterParameter={x:Static local:CameraEnum.FirstCamera}}"
                InputTransparent="True"
                Style="{StaticResource cameraTextFrame}">
                <Frame.Triggers>
                    <DataTrigger
                        Binding="{Binding Source={x:Reference frCam1}, Path=BorderColor}"
                        TargetType="Frame"
                        Value="#03BE0B">
                        <Setter Property="BackgroundColor" Value="#03BE0B" />
                    </DataTrigger>
                </Frame.Triggers>
                <Label
                    StyleClass="BoldText"
                    Text="Kênh 1"
                    TextColor="#FAFF00"
                    VerticalOptions="Center">
                    <Label.Triggers>
                        <DataTrigger
                            Binding="{Binding Source={x:Reference frCam1}, Path=BorderColor}"
                            TargetType="Label"
                            Value="#03BE0B">
                            <Setter Property="TextColor" Value="{DynamicResource WhiteColor}" />
                        </DataTrigger>
                    </Label.Triggers>
                </Label>
            </Frame>
            <vlc:VideoView
                x:Name="topLeftCam"
                Grid.Row="1"
                InputTransparent="True"
                MediaPlayer="{Binding MediaPlayerNo1}" />
            <indicator:SfBusyIndicator Grid.Row="1" IsBusy="{Binding IsCam1Loaded, Converter={StaticResource ShowHideColumnConverter}}" />
            <Grid
                Grid.RowSpan="2"
                BackgroundColor="White"
                InputTransparent="True"
                Opacity="0.2">
                <Grid.Triggers>
                    <DataTrigger
                        Binding="{Binding Source={x:Reference frCam1}, Path=BorderColor}"
                        TargetType="Grid"
                        Value="#03BE0B">
                        <Setter Property="BackgroundColor" Value="Transparent" />
                    </DataTrigger>
                </Grid.Triggers>
            </Grid>
        </Grid>

        <!--  Cam 2  -->
        <Grid
            Grid.Row="1"
            Grid.Column="0"
            BackgroundColor="Black"
            RowDefinitions="40,*">
            <Grid.GestureRecognizers>
                <TapGestureRecognizer Command="{Binding CameraFrameTappedCommand}" CommandParameter="{x:Static local:CameraEnum.SecondCamera}" />
            </Grid.GestureRecognizers>
            <Label
                Margin="0,0,10,0"
                FontSize="17"
                HorizontalOptions="End"
                StyleClass="BoldText"
                Text="{Binding Cam2ReloadCount}"
                TextColor="White"
                VerticalOptions="Center" />
            <Frame
                x:Name="frCam2"
                BackgroundColor="Transparent"
                BorderColor="{Binding SelectedCamera, Mode=OneWay, Converter={StaticResource CameraTextBorderConverter}, ConverterParameter={x:Static local:CameraEnum.SecondCamera}}"
                InputTransparent="True"
                Style="{StaticResource cameraTextFrame}">
                <Frame.Triggers>
                    <DataTrigger
                        Binding="{Binding Source={x:Reference frCam2}, Path=BorderColor}"
                        TargetType="Frame"
                        Value="#03BE0B">
                        <Setter Property="BackgroundColor" Value="#03BE0B" />
                    </DataTrigger>
                </Frame.Triggers>
                <Label
                    StyleClass="BoldText"
                    Text="Kênh 2"
                    TextColor="#FAFF00"
                    VerticalOptions="Center">
                    <Label.Triggers>
                        <DataTrigger
                            Binding="{Binding Source={x:Reference frCam2}, Path=BorderColor}"
                            TargetType="Label"
                            Value="#03BE0B">
                            <Setter Property="TextColor" Value="{DynamicResource WhiteColor}" />
                        </DataTrigger>
                    </Label.Triggers>
                </Label>
            </Frame>
            <vlc:VideoView
                x:Name="bottomLeftCam"
                Grid.Row="1"
                InputTransparent="True"
                MediaPlayer="{Binding MediaPlayerNo2}" />
            <indicator:SfBusyIndicator Grid.Row="1" IsBusy="{Binding IsCam2Loaded, Converter={StaticResource ShowHideColumnConverter}}" />
            <Grid
                Grid.RowSpan="2"
                BackgroundColor="White"
                InputTransparent="True"
                Opacity="0.2">
                <Grid.Triggers>
                    <DataTrigger
                        Binding="{Binding Source={x:Reference frCam2}, Path=BorderColor}"
                        TargetType="Grid"
                        Value="#03BE0B">
                        <Setter Property="BackgroundColor" Value="Transparent" />
                    </DataTrigger>
                </Grid.Triggers>
            </Grid>
        </Grid>

        <!--  Cam 3  -->
        <Grid
            Grid.Column="1"
            BackgroundColor="Black"
            RowDefinitions="40,*">
            <Grid.GestureRecognizers>
                <TapGestureRecognizer Command="{Binding CameraFrameTappedCommand}" CommandParameter="{x:Static local:CameraEnum.ThirdCamera}" />
            </Grid.GestureRecognizers>
            <Label
                Margin="0,0,10,0"
                FontSize="17"
                HorizontalOptions="End"
                StyleClass="BoldText"
                Text="{Binding Cam3ReloadCount}"
                TextColor="White"
                VerticalOptions="Center" />
            <Frame
                x:Name="frCam3"
                BackgroundColor="Transparent"
                BorderColor="{Binding SelectedCamera, Mode=OneWay, Converter={StaticResource CameraTextBorderConverter}, ConverterParameter={x:Static local:CameraEnum.ThirdCamera}}"
                InputTransparent="True"
                Style="{StaticResource cameraTextFrame}">
                <Frame.Triggers>
                    <DataTrigger
                        Binding="{Binding Source={x:Reference frCam3}, Path=BorderColor}"
                        TargetType="Frame"
                        Value="#03BE0B">
                        <Setter Property="BackgroundColor" Value="#03BE0B" />
                    </DataTrigger>
                </Frame.Triggers>
                <Label
                    StyleClass="BoldText"
                    Text="Kênh 3"
                    TextColor="#FAFF00"
                    VerticalOptions="Center">
                    <Label.Triggers>
                        <DataTrigger
                            Binding="{Binding Source={x:Reference frCam3}, Path=BorderColor}"
                            TargetType="Label"
                            Value="#03BE0B">
                            <Setter Property="TextColor" Value="{DynamicResource WhiteColor}" />
                        </DataTrigger>
                    </Label.Triggers>
                </Label>
            </Frame>
            <vlc:VideoView
                x:Name="topRightCam"
                Grid.Row="1"
                InputTransparent="True"
                MediaPlayer="{Binding MediaPlayerNo3}" />
            <indicator:SfBusyIndicator Grid.Row="1" IsBusy="{Binding IsCam3Loaded, Converter={StaticResource ShowHideColumnConverter}}" />
            <Grid
                Grid.RowSpan="2"
                BackgroundColor="White"
                InputTransparent="True"
                Opacity="0.2">
                <Grid.Triggers>
                    <DataTrigger
                        Binding="{Binding Source={x:Reference frCam3}, Path=BorderColor}"
                        TargetType="Grid"
                        Value="#03BE0B">
                        <Setter Property="BackgroundColor" Value="Transparent" />
                    </DataTrigger>
                </Grid.Triggers>
            </Grid>
        </Grid>

        <!--  Cam 4  -->
        <Grid
            Grid.Row="1"
            Grid.Column="1"
            BackgroundColor="Black"
            RowDefinitions="40,*">
            <Grid.GestureRecognizers>
                <TapGestureRecognizer Command="{Binding CameraFrameTappedCommand}" CommandParameter="{x:Static local:CameraEnum.FourthCamera}" />
            </Grid.GestureRecognizers>
            <Label
                Margin="0,0,10,0"
                FontSize="17"
                HorizontalOptions="End"
                StyleClass="BoldText"
                Text="{Binding Cam4ReloadCount}"
                TextColor="White"
                VerticalOptions="Center" />
            <Frame
                x:Name="frCam4"
                BackgroundColor="Transparent"
                BorderColor="{Binding SelectedCamera, Mode=OneWay, Converter={StaticResource CameraTextBorderConverter}, ConverterParameter={x:Static local:CameraEnum.FourthCamera}}"
                InputTransparent="True"
                Style="{StaticResource cameraTextFrame}">
                <Frame.Triggers>
                    <DataTrigger
                        Binding="{Binding Source={x:Reference frCam4}, Path=BorderColor}"
                        TargetType="Frame"
                        Value="#03BE0B">
                        <Setter Property="BackgroundColor" Value="#03BE0B" />
                    </DataTrigger>
                </Frame.Triggers>
                <Label
                    StyleClass="BoldText"
                    Text="Kênh 4"
                    TextColor="#FAFF00"
                    VerticalOptions="Center">
                    <Label.Triggers>
                        <DataTrigger
                            Binding="{Binding Source={x:Reference frCam4}, Path=BorderColor}"
                            TargetType="Label"
                            Value="#03BE0B">
                            <Setter Property="TextColor" Value="{DynamicResource WhiteColor}" />
                        </DataTrigger>
                    </Label.Triggers>
                </Label>
            </Frame>
            <vlc:VideoView
                x:Name="bottomRightCam"
                Grid.Row="1"
                InputTransparent="True"
                MediaPlayer="{Binding MediaPlayerNo4}" />
            <indicator:SfBusyIndicator Grid.Row="1" IsBusy="{Binding IsCam4Loaded, Converter={StaticResource ShowHideColumnConverter}}" />
            <Grid
                Grid.RowSpan="2"
                BackgroundColor="White"
                InputTransparent="True"
                Opacity="0.2">
                <Grid.Triggers>
                    <DataTrigger
                        Binding="{Binding Source={x:Reference frCam4}, Path=BorderColor}"
                        TargetType="Grid"
                        Value="#03BE0B">
                        <Setter Property="BackgroundColor" Value="Transparent" />
                    </DataTrigger>
                </Grid.Triggers>
            </Grid>
        </Grid>

    </Grid>

</ContentView>